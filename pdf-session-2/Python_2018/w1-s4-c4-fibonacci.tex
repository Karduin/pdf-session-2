    \hypertarget{la-suite-de-fibonacci-suite}{%
\section{La suite de Fibonacci
(suite)}\label{la-suite-de-fibonacci-suite}}

    \hypertarget{compluxe9ment---niveau-intermuxe9diaire}{%
\subsection{Complément - niveau
intermédiaire}\label{compluxe9ment---niveau-intermuxe9diaire}}

    Nous reprenons le cas de la fonction \texttt{fibonacci} que nous avons
déjà vue, mais cette fois nous voulons que l'utilisateur puisse indiquer
l'entier en entrée de l'algorithme, non plus en répondant à une
question, mais sur la ligne de commande, c'est-à-dire en tapant~:

\begin{verbatim}
$ python3 fibonacci.py 12
\end{verbatim}

    \textbf{Avertissement~:}\\

Attention, cette version-ci \textbf{ne fonctionne pas dans ce notebook},
justement car on n'a pas de moyen dans un notebook d'invoquer un
programme en lui passant des arguments de cette façon. Ce notebook est
rédigé pour vous permettre de vous entraîner avec la fonction de
téléchargement au format Python, qu'on a vue dans la vidéo, et de faire
tourner ce programme sur votre propre ordinateur.

    \hypertarget{le-module-argparse}{%
\subsubsection{\texorpdfstring{Le module
\texttt{argparse}}{Le module argparse}}\label{le-module-argparse}}

    Cette fois nous importons le module \texttt{argparse}, c'est lui qui va
nous permettre d'interpréter les arguments passés sur la ligne de
commande.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k+kn}{from} \PY{n+nn}{argparse} \PY{k}{import} \PY{n}{ArgumentParser}
\end{Verbatim}


    Puis nous répétons la fonction \texttt{fibonacci}~:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{fibonacci}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{p}{:}
            \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{retourne le nombre de fibonacci pour l}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{entier n}\PY{l+s+s2}{\PYZdq{}}
            \PY{c+c1}{\PYZsh{} pour les petites valeurs de n il n\PYZsq{}y a rien à calculer}
            \PY{k}{if} \PY{n}{n} \PY{o}{\PYZlt{}}\PY{o}{=} \PY{l+m+mi}{1}\PY{p}{:}
                \PY{k}{return} \PY{l+m+mi}{1}
            \PY{c+c1}{\PYZsh{} sinon on initialise f1 pour n\PYZhy{}1 et f2 pour n\PYZhy{}2}
            \PY{n}{f2}\PY{p}{,} \PY{n}{f1} \PY{o}{=} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{1}
            \PY{c+c1}{\PYZsh{} et on itère n\PYZhy{}1 fois pour additionner}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{n} \PY{o}{+} \PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
                \PY{n}{f2}\PY{p}{,} \PY{n}{f1} \PY{o}{=} \PY{n}{f1}\PY{p}{,} \PY{n}{f1} \PY{o}{+} \PY{n}{f2}
        \PY{c+c1}{\PYZsh{}        print(i, f2, f1)}
            \PY{c+c1}{\PYZsh{} le résultat est dans f1}
            \PY{k}{return} \PY{n}{f1}
\end{Verbatim}


    \emph{Remarque~:}

Certains d'entre vous auront évidemment remarqué que l'on aurait pu
éviter de copier-coller la fonction \texttt{fibonacci} comme cela~;
c'est à ça que servent les modules, mais nous n'en sommes pas là.

    \hypertarget{un-objet-parser}{%
\subsubsection{\texorpdfstring{Un objet
\texttt{parser}}{Un objet parser}}\label{un-objet-parser}}

    À présent, nous utilisons le module \texttt{argparse}, pour lui dire
qu'on attend exactement un argument sur la ligne de commande, et qu'il
doit être un entier. Ici encore, ne vous inquiétez pas si vous ne
comprenez pas tout le code. L'objectif est de vous donner un morceau de
code utilisable tout de suite, pour jouer avec votre interpréteur
Python.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{c+c1}{\PYZsh{} à nouveau : ceci n\PYZsq{}est pas conçu pour être exécuté dans le notebook !}
        \PY{n}{parser} \PY{o}{=} \PY{n}{ArgumentParser}\PY{p}{(}\PY{p}{)}
        \PY{n}{parser}\PY{o}{.}\PY{n}{add\PYZus{}argument}\PY{p}{(}\PY{n}{dest}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{entier}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n+nb}{type}\PY{o}{=}\PY{n+nb}{int}\PY{p}{,}
                            \PY{n}{help}\PY{o}{=}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{entier d}\PY{l+s+s2}{\PYZsq{}}\PY{l+s+s2}{entrée}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{input\PYZus{}args} \PY{o}{=} \PY{n}{parser}\PY{o}{.}\PY{n}{parse\PYZus{}args}\PY{p}{(}\PY{p}{)}
        \PY{n}{entier} \PY{o}{=} \PY{n}{input\PYZus{}args}\PY{o}{.}\PY{n}{entier}
\end{Verbatim}


    Nous pouvons à présent afficher le résultat~:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{f}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{fibonacci(}\PY{l+s+si}{\PYZob{}entier\PYZcb{}}\PY{l+s+s2}{) = }\PY{l+s+s2}{\PYZob{}}\PY{l+s+s2}{fibonacci(entier)\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    Vous pouvez donc à présent~:

\begin{itemize}
\item
  télécharger ce code sur votre disque comme un fichier
  \texttt{fibonacci.py} en utilisant le menu
  \emph{``File~-\textgreater{}~Download as~-\textgreater{}~Python''}
\item
  l'exécuter avec simplement l'interpréteur Python comme ceci~:

  \$ python3 fibonacci.py 56
\end{itemize}